jQuery(function(e){e("body").hasClass("as_embed")&&!e("body").hasClass("no-args")&&e(window).on("touchmove scroll",function(e){e.preventDefault(),window.scrollTo(0,0)}),(window.setFormHandlers=function(){var e=jQuery,t=e("#form_signup");e(".list-page-title").unbind("flowtype"),e(".list-page-title").flowtype({maximum:725,minFont:14,maxFont:27,fontRatio:18}),e(t).find("#submit").unbind("click"),e(t).find("#submit").click(saveSubscriber),e(t).find(".multi-field > input").unbind("focus"),e(t).find(".multi-field > input").focus(function(t){return e(this).parent().hasClass("current")?!0:void e(".multi-field.current > input").focus()}),e(t).find(".multi-field > input").unbind("keydown"),e(t).find(".multi-field > input").keydown(function(e){var t=e.keyCode||e.which;13===t&&saveSubscriber(),38===t&&resetFields()}),e(t).unbind("submit"),e(t).submit(function(){return!1}),"undefined"!=typeof Clipboard&&new Clipboard(".form-link-click")})(),(window.loadForm=function(){var e,t=jQuery,i=(t("#form_signup"),"undefined"==typeof window.formSlug?!1:formSlug);return!i&&t("body").hasClass("page-template-template-dash")&&t(".list-page").length&&t(".list-page").attr("id")&&(i=t(".list-page").attr("id").replace("view_","")),i?void t.ajax({type:"POST",url:"undefined"==typeof ajaxUrl?"/wp-admin/admin-ajax.php":ajaxUrl,data:{action:"up_get_form_data",slug:i},success:function(i){return i=t.parseJSON(i),1!=i.success?!1:(e=1==i.isPremiumAuthor,e?t(".powered-by").remove():t(".powered-by").attr("style",""),void(e&&i.prefillForm&&prefillForm(i.prefillForm)))}}):!1})()});var formValidateEmail=function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e&&""!=e.trim()?t.test(e):!1},formInputFloatLabel=function(){var e=jQuery,t=this,i=e(t).attr("placeholder")?e(t).attr("placeholder"):!1,i=e(t).attr("data-label")?e(t).attr("data-label"):i,a=(e(t).attr("type"),e(t).val());return i?a.length<=0?(e(t).hasClass("float-label")&&e(t).removeClass("float-label"),e(t).siblings(".float-label-text").remove(),!0):e(t).hasClass("float-label")?!0:(e('<label class="float-label-text">'+i+"</label>").insertBefore(t),void e(t).addClass("float-label")):!0},nextField=function(e){var t=jQuery,i=t(".multi-field.current"),a=t(i).next(".multi-field").length>0,n=t(i).next(".multi-field");t(n).next(".multi-field").length<=0;return e&&e.preventDefault(),a?(t(i).removeClass("current"),t(i).addClass("previous"),t(n).addClass("current"),t(n).addClass("seen"),t(n).hasClass("seen")||t(n).addClass("seen"),!1):!1},nextInvalidField=function(e){var t=jQuery,i=t("#form_signup"),a=t(i).find(".multi-field > input"),n=t(i).find(".multi-field").length,l=t(i).find(".multi-field").not(".seen").length,r=t(i).find(".multi-field.current"),s=t(i).find(".multi-field.previous"),d=!1;return e&&e.preventDefault(),t.each(a,function(e){var i=t(this),a=t(i).val(),n=t(i).parent();return d!==!1?!1:("email"!=t(i).attr("id")||a.length||(d=n),d||"email"!=t(i).attr("type")||formValidateEmail(a)||(d=n),t(d).addClass("invalid"),void t(d).find("input").on("keydown",function(){t(d).removeClass("invalid")}))}),!d&&n>1&&l>0&&(d=t(r).next(".multi-field").not(".seen")),d?t(d).hasClass("current")?!0:(t(s).removeClass("previous"),t(r).addClass("previous"),t(r).removeClass("current"),t(d).addClass("current"),t(d).addClass("seen"),t(d).find("input").focus(),t(d).hasClass("last-multi-field")&&(t(i).find("#submit > .text").text(formData.submitText),t(i).find("#submit > .icon").html(formData.submitIcon)),!0):!1},prevField=function(e){var t=jQuery,i=t(".multi-field.current"),a=t(i).prev(".multi-field"),n=t(a).length>0;return e&&e.preventDefault(),n?(t(i).removeClass("current"),t(i).addClass("previous"),t(".multi-field.previous").removeClass("previous"),t(a).addClass("current"),t(a).find("input").focus(),t(a).hasClass("seen")||t(a).addClass("seen"),!1):!1},goToField=function(e){var t=jQuery,i=t("#form_signup"),a=t(i).find(".multi-field.current"),n=t(i).find(".multi-field.previous"),l=t(i).find(".multi-field"+e);return t(n).removeClass("previous"),t(a).addClass("previous"),t(a).removeClass("current"),t(l).addClass("current"),t(l).addClass("seen"),t(l).find("input").focus(),!0},resetFields=function(){var e=jQuery,t=e("#form_signup"),i=formData.submitText,a=formData.submitIcon;e(t).find("input").each(function(){e(this).prop("disabled",!1)}),e(t).find(".seen").removeClass("seen"),e(".multi-field").length>1&&(i=formData.nextText,a=formData.nextIcon),e(t).find("#submit > .text").show(),e(t).find("#submit > .icon").hide(),e(t).find("#submit > .text").text(i),e(t).find("#submit > .icon").html(a),goToField("#email_holder")},saveSubscriber=function(){var e=jQuery,t=e("#form_signup"),i=e(t).find("#email").val(),a=e(t).find("#submit > .text"),n=e(t).find("#submit > .icon"),l="Oops! Please try again.",r=e(t).find(".multi-field.current > input").attr("id"),s=e(t).find("#first_name_holder").length||e(t).find("#last_name_holder").length,d={action:"add_list_signup",post_id:e(t).find("#form").val()||"",signup_id:e(t).find("#signup").val()||"",email:i,first_name:e(t).find("#first_name").val()||"",last_name:e(t).find("#last_name").val()||"",source:window.location.href};return"undefined"!=typeof refData&&(d.referrer=refData.referrer),"email"==r&&formValidateEmail(i)||!nextInvalidField()?("email"==r&&formValidateEmail(i)&&s&&(d.save_and_continue=!0),e(a).hide(),e(a).text(formData.loadingText),e(n).html(formData.loadingIcon),e(n).show(),e.ajax({type:"POST",url:"undefined"==typeof ajaxUrl?"/wp-admin/admin-ajax.php":ajaxUrl,data:d,success:function(i){return i=e.parseJSON(i),e(n).hide(),e(a).show(),i&&"1"!=i.success?(i.message&&(l=i.message),alertMsgForm(l),!1):"email"==r&&s?(nextInvalidField(),!1):("function"==typeof ga&&i.signupId&&ga("send","event","Forms","New Subscriber",i.signupId,"1"),e(".kabuki").fadeOut(300,function(){e(t).hide(),e(".list-desc").hide(),e(".list-signups-count").hide(),e(".list-page-title").text(e(".list-page-title").attr("data-confirmation")),e(".list-share").show(),e(".kabuki").fadeIn(300)}),!0)},error:function(e){console.log("error updating signup"),console.log(e)}}),!1):!1},alertMsgForm=function(e){var t=jQuery,i=t("#form_signup"),a=t(i).find("#submit > .text"),n=t(i).find("#submit > .icon"),l=t(i).find(".multi-field.current");t(l).removeClass("current"),t('<div class="multi-field current invalid alert-message-field"><input class="form-control" style="color: red;" type="text" disabled="disabled" value="'+e+'"/></div>').insertAfter(t(l)),setTimeout(function(){t(".alert-message-field").remove(),resetFields()},1e3),t(a).text(formData.errorText),t(n).html(formData.errorIcon)},prefillForm=function(e){var t=jQuery,i=t("#form_signup"),a=e.email||!1,n=e.first_name||!1,l=e.last_name||!1;return a&&!t("#email").is(":focus")&&t(i).find("#email").val(a),n&&!t("#first_name").is(":focus")&&t(i).find("#first_name").val(n),l&&!t("#last_name").is(":focus")&&t(i).find("#last_name").val(l),t(".form-control").each(formInputFloatLabel),!0};